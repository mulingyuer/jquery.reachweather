'use strict'; (function (a) { a.extend({ reachweather: function reachweather(b) { function c(i) { a.ajax({ url: 'https://restapi.amap.com/v3/ip', data: { key: b.amapkey, ip: i }, type: 'GET', success: function success(j) { if ('1' === j.status) { var k = j.city; if ('string' == typeof k) e(k); else throw new Error('\u5F53\u524D\u63D2\u4EF6\u4E0D\u652F\u6301\u56FD\u5916\u5929\u6C14\u83B7\u53D6\uFF01') } else f('\u901A\u8FC7\u9AD8\u5FB7ip\u5B9A\u4F4D\u51FA\u9519\uFF0C\u9519\u8BEF\u6D88\u606F\uFF1A' + j.info + '\u72B6\u6001\u7801\uFF1A' + j.infocode) }, error: function error(j) { var k = j.status; f('\u901A\u8FC7\u9AD8\u5FB7ip\u5B9A\u4F4D\u51FA\u9519\uFF0C\u9519\u8BEF\u7801\uFF1A' + k) } }) } function d(i) { a.ajax({ url: 'https://api.map.baidu.com/location/ip', data: { ak: b.baidukey, ip: i }, type: 'GET', dataType: 'jsonp', success: function success(j) { var k = j.content.address_detail.city; k ? e(k) : f('\u65E0\u6CD5\u83B7\u53D6\u5230\u5F53\u524D\u6240\u5728\u7684city\uFF08\u57CE\u5E02\uFF09') }, error: function error(j) { var m = j.status; 1 === m ? f('\u767E\u5EA6\u670D\u52A1\u54CD\u5E94\u8D85\u65F6\u6216\u7CFB\u7EDF\u5185\u90E8\u9519\u8BEF\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 101 === m ? f('\u8BF7\u6C42\u6D88\u606F\u6CA1\u6709\u643A\u5E26\u767E\u5EA6key\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 200 === m ? f('APP\u4E0D\u5B58\u5728\uFF0CAK\u6709\u8BEF\u8BF7\u68C0\u67E5\u518D\u91CD\u8BD5\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 210 === m ? f('APP IP\u6821\u9A8C\u5931\u8D25\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 211 === m ? f('APP SN\u6821\u9A8C\u5931\u8D25 \uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 220 === m ? f('APP Referer\u6821\u9A8C\u5931\u8D25\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 240 === m ? f('APP \u670D\u52A1\u88AB\u7981\u7528\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 250 === m ? f('\u7528\u6237\u4E0D\u5B58\u5728\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 260 === m ? f('\u670D\u52A1\u4E0D\u5B58\u5728\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 261 === m ? f('\u670D\u52A1\u88AB\u7981\u7528\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 301 === m ? f('\u6C38\u4E45\u914D\u989D\u8D85\u9650\uFF0C\u9650\u5236\u8BBF\u95EE\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 302 === m ? f('\u5929\u914D\u989D\u8D85\u9650\uFF0C\u9650\u5236\u8BBF\u95EE \uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 401 === m ? f('\u5F53\u524D\u5E76\u53D1\u91CF\u5DF2\u7ECF\u8D85\u8FC7\u7EA6\u5B9A\u5E76\u53D1\u914D\u989D\uFF0C\u9650\u5236\u8BBF\u95EE\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 402 === m ? f('\u5F53\u524D\u5E76\u53D1\u91CF\u5DF2\u7ECF\u8D85\u8FC7\u7EA6\u5B9A\u5E76\u53D1\u914D\u989D\uFF0C\u5E76\u4E14\u670D\u52A1\u603B\u5E76\u53D1\u91CF\u4E5F\u5DF2\u7ECF\u8D85\u8FC7\u8BBE\u5B9A\u7684\u603B\u5E76\u53D1\u914D\u989D\uFF0C\u9650\u5236\u8BBF\u95EE\uFF0C\u9519\u8BEF\u7801\uFF1A ' + m) : 1001 === m ? f('\u6CA1\u6709IPv6\u5730\u5740\u8BBF\u95EE\u7684\u6743\u9650\uFF0C\u9519\u8BEF\u7801\uFF1A' + m) : f('\u672A\u5B9A\u4E49\u7684\u9519\u8BEF\uFF0C\u9519\u8BEF\u7801\uFF1A' + m) } }) } function e(i) { a.ajax({ url: 'https://restapi.amap.com/v3/weather/weatherInfo', data: { key: b.amapkey, city: i }, type: 'GET', success: function success(j) { if ('1' === j.status) { var k = j.lives[0]; b.success(k) } else f('\u83B7\u53D6\u5929\u6C14\u670D\u52A1\u5668\u8FD4\u56DE\u5931\u8D25\uFF0C\u9519\u8BEF\u6D88\u606F\uFF1A' + j.info + '\u72B6\u6001\u7801\uFF1A' + j.infocode) }, error: function error(j) { var k = j.status; f('\u6700\u540E\u4E00\u6B65\u83B7\u53D6\u5929\u6C14\u65F6ajax\u51FA\u9519\uFF0C\u9519\u8BEF\u7801\uFF1A' + k) } }) } function f(i) { throw new Error(i) } if (!b.baidukey) throw new Error('\u53C2\u6570baidukey\u6CA1\u6709\u4F20\u5165\u5F00\u53D1\u8005key'); if (!b.amapkey) throw new Error('\u53C2\u6570amapkey\u6CA1\u6709\u4F20\u5165\u5F00\u53D1\u8005key'); if (!b.success) throw new Error('\u6CA1\u6709\u4F20\u5165sccess'); else { var i = Object.prototype.toString.call(b.success); if ('function' !== i.substring(1, i.length - 1).split(/\s/)[1].toLowerCase()) throw new Error('\u4F20\u5165\u7684success\u9519\u8BEF\uFF0C\u5B83\u4E0D\u662F\u4E00\u4E2Afunction\uFF01') } var g = a('<script></script>'), h = document.getElementsByTagName('body')[0]; g.on('load', function () { var i = returnCitySN.cname.toLowerCase(); i.match('china') ? d(returnCitySN.cip) : c(returnCitySN.cip) }), g.attr('src', 'https://pv.sohu.com/cityjson?ie=utf-8'), h.appendChild(g[0]) } }) })(jQuery);